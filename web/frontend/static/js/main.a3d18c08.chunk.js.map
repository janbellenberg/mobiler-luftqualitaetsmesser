{"version":3,"sources":["components/Dialog/DiagDialog.js","components/Header/index.js","components/GridElement/index.js","components/GridElement/DiagramElement.js","components/IconButton/index.js","components/GridElement/ActionElement.js","icons/export.png","icons/refresh.png","icons/info.png","components/StatusIndicator/index.js","components/GridElement/InfoElement.js","icons/temperture.png","icons/humidity.png","icons/co2.png","components/Dialog/index.js","config.js","components/Dialog/FilterDialog.js","components/Dialog/InfoDialog.js","App.js","index.js"],"names":["port","Header","onLoadData","onDiag","src","alt","type","value","onClick","id","GridElement","children","DiagramElement","title","data","labels","min","max","height","width","datasets","label","fill","backgroundColor","borderColor","options","elements","point","radius","maintainAspectRatio","responsive","scales","yAxes","ticks","legend","display","IconButton","text","icon","className","ActionElement","onExport","onRefresh","onInfo","status","undefined","icons","StatusIndicator","score","temperature","humidity","co2","InfoElement","location","room","position","style","marginTop","Dialog","actionText","onActionClick","onAbortClick","open","SerialPort","Binding","WSABinding","DiagDialog","onHide","useState","baudRate","setBaudRate","connected","setConnected","useReducer","state","action","payload","Error","content","dispatch","dec2hex16bitWithPad","i","toString","substr","toUpperCase","connect","a","navigator","serial","requestPort","info","getInfo","path","usbVendorId","usbProductId","autoOpen","on","encodedString","String","fromCharCode","apply","useEffect","binding","isOpen","close","htmlFor","onChange","e","parseInt","target","readOnly","SERVER","FilterDialog","onFilter","Date","toISOString","slice","date","setDate","setLocation","setRoom","setPosition","locationList","setLocations","roomList","setRooms","positionList","setPositions","fetch","then","res","json","filter","name","map","item","InfoDialog","window","focus","margin","href","rel","App","setTemperature","setHumidity","setCo2","setLabels","selectedLocation","setSelectedLocation","selectedRoom","setSelectedRoom","selectedPosition","setSelectedPosition","lastFilter","setLastFilter","showDiagDialog","setShowDiagDialog","showFilterDialog","setShowFilterDialog","showInfoDialog","setShowInfoDialog","updateData","tmp","t","h","c","l","forEach","push","timestamp","length","result","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","exportCSV","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a3d18c08.chunk.js","sourcesContent":["import { useState, useReducer, useEffect } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport Dialog from \".\";\r\nimport SerialPort from '@serialport/stream';\r\nimport WSABinding from 'serialport-binding-webserialapi';\r\n\r\nSerialPort.Binding = WSABinding;\r\nlet port;\r\n\r\nconst DiagDialog = ({onHide}) => {\r\n\r\n  function reducer(state, action) {\r\n    switch (action.type) {\r\n      case 'append':\r\n        return state + action.payload;\r\n      default:\r\n        throw new Error();\r\n    }\r\n  }\r\n\r\n  const [baudRate, setBaudRate] = useState(9600);\r\n  const [connected, setConnected] = useState(false);\r\n  const [content, dispatch] = useReducer(reducer, \"\");\r\n\r\n  const dec2hex16bitWithPad = (i) => {\r\n    return (i + 0x10000).toString(16).substr(-4).toUpperCase();\r\n  }  \r\n\r\n  const connect = async () => {\r\n    port = await navigator.serial.requestPort();\r\n    let info = port.getInfo();\r\n    let path = 'wsa://'\r\n      + dec2hex16bitWithPad(info.usbVendorId)\r\n      + '-'\r\n      + dec2hex16bitWithPad(info.usbProductId);\r\n\r\n    port = new SerialPort(path, { \r\n      baudRate: baudRate,\r\n      autoOpen: true\r\n    });\r\n\r\n    port.on('open', () => {\r\n      setConnected(true);\r\n    });\r\n\r\n    port.on('data', data => {\r\n      let encodedString = String.fromCharCode.apply(null, data);\r\n      dispatch({type: 'append', payload: encodedString});\r\n    });\r\n  };\r\n\r\n  const close = () => {\r\n    setConnected(false);\r\n    if(port !== undefined && port !== null && port.binding.isOpen) {\r\n      port.close();\r\n    }\r\n    onHide();\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if(port !== undefined && port !== null && port.binding.isOpen) {\r\n        port.close();\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"diag-dialog-wrapper\">\r\n      <Dialog\r\n        title={\"Diagnose (\" + (connected ? \"Verbindung hergestellt\" : \"keine Verbindung\") + \")\"}\r\n        actionText=\"Verbinden\"\r\n        onActionClick={connect}\r\n        onAbortClick={close}>\r\n\r\n        <span id=\"baud-rate-wrapper\">\r\n          <label htmlFor=\"baudrate\">Baudrate: </label>\r\n          <select\r\n            id=\"baudrate\"\r\n            value={baudRate}\r\n            onChange={(e) => { setBaudRate(parseInt(e.target.value)) }}>\r\n\r\n            <option>300</option>\r\n            <option>600</option>\r\n            <option>1200</option>\r\n            <option>2400</option>\r\n            <option>4800</option>\r\n            <option>9600</option>\r\n            <option>14400</option>\r\n            <option>19200</option>\r\n            <option>28800</option>\r\n            <option>38400</option>\r\n            <option>56000</option>\r\n            <option>57600</option>\r\n            <option>115200</option>\r\n            <option>128000</option>\r\n            <option>256000</option>\r\n          </select>\r\n        </span>\r\n          \r\n        <textarea\r\n          readOnly\r\n          value={content}\r\n          style={{height: \"15em\"}} />\r\n\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nDiagDialog.propTypes = {\r\n  onHide: PropTypes.func.isRequired\r\n};\r\n\r\nexport default DiagDialog;","import PropTypes from 'prop-types';\r\nimport './Header.css';\r\n\r\nconst Header = ({onLoadData, onDiag}) => {\r\n\r\n  return (\r\n    <header>\r\n      <div>\r\n        <img src=\"https://hnbk.de/wp-content/uploads/2017/04/HNBKSmall-e1492069901821.png\" alt=\"HNBK\" />\r\n        <h1>Mobiler Luftqualitätsmesser</h1>\r\n      </div>\r\n      <div>\r\n        <input \r\n          type=\"button\"\r\n          value=\"Daten laden\"\r\n          onClick={onLoadData} />\r\n\r\n        <input\r\n          type=\"button\"\r\n          value=\"Diagnose\"\r\n          onClick={onDiag} />\r\n      </div>\r\n      <div id=\"header-bottom\" />\r\n    </header>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  onLoadData: PropTypes.func.isRequired,\r\n  onDiag: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Header;","import PropTypes from 'prop-types';\r\nimport './GridElement.css';\r\n\r\nconst GridElement = ({children}) => {\r\n  return (\r\n    <section>\r\n      {children}\r\n    </section>\r\n  );\r\n};\r\n\r\nGridElement.propTypes = {\r\n  children: PropTypes.node\r\n};\r\n\r\nexport default GridElement;","import React from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport GridElement from '.';\r\n\r\nconst DiagramElement = ({title, data, labels, min, max}) => {\r\n  \r\n  return (\r\n    <GridElement>\r\n      <h2>{title}</h2>\r\n      <Line height={250} width={500}\r\n        data={{\r\n          labels: labels,\r\n          datasets: [{\r\n            label: title,\r\n            data: data,\r\n            fill: true,\r\n            backgroundColor: \"#659DBD70\",\r\n            borderColor: \"#659DBD\"\r\n          }]\r\n        }}\r\n        options={{\r\n          elements: { point: { radius: 2 } },\r\n          maintainAspectRatio: true,\r\n          responsive: true,\r\n          scales: {\r\n            yAxes: [{\r\n              ticks: {\r\n                min: min,\r\n                max: max\r\n              }\r\n            }]\r\n          },\r\n          legend: {\r\n            display: false\r\n          }\r\n        }}\r\n\r\n      />\r\n    </GridElement>\r\n  );\r\n}\r\n\r\nDiagramElement.propTypes = {\r\n  title: PropTypes.node.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  labels: PropTypes.array.isRequired,\r\n  min: PropTypes.number.isRequired,\r\n  max: PropTypes.number.isRequired\r\n};\r\n\r\nexport default DiagramElement;","import PropTypes from 'prop-types';\r\nimport './IconButton.css';\r\n\r\nconst IconButton = ({text, icon, onClick}) => {\r\n  return (\r\n    <span className=\"icon-button\" onClick={onClick}>\r\n      <img src={icon} alt=\"\" />\r\n      {text}\r\n    </span>\r\n  );\r\n};\r\n\r\nIconButton.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  icon: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired\r\n};\r\n\r\nexport default IconButton;","import PropTypes from 'prop-types';\r\nimport GridElement from \".\";\r\nimport IconButton from \"../IconButton\";\r\nimport ExportIcon from \"../../icons/export.png\";\r\nimport RefreshIcon from \"../../icons/refresh.png\";\r\nimport InfoIcon from '../../icons/info.png';\r\n\r\nconst ActionElement = ({onExport, onRefresh, onInfo}) => {\r\n  return (\r\n    <GridElement>\r\n      <div id=\"action-flex\">\r\n        <IconButton\r\n          text=\"Exportieren\"\r\n          icon={ExportIcon}\r\n          onClick={onExport} />\r\n\r\n        <IconButton\r\n          text=\"Aktualisieren\"\r\n          icon={RefreshIcon}\r\n          onClick={onRefresh} />\r\n        \r\n        <IconButton\r\n          text=\"Info\"\r\n          icon={InfoIcon}\r\n          onClick={onInfo} />\r\n      </div>\r\n    </GridElement>\r\n  );\r\n};\r\n\r\nActionElement.propTypes = {\r\n  onExport: PropTypes.func.isRequired,\r\n  onRefresh: PropTypes.func.isRequired,\r\n  onInfo: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ActionElement;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABX0lEQVRYR+2Xvy4FURDGf19FJBKJzkuo0CiIKCReQZSCCAndjaBEKPxNvIDOK5CIN/AKCqIjNJJPzs0W69p792TvZrfZbXfOmd+Z+WbmHFHzp5r90wB0jYDt/TLTIylzv14ALhkg01cMwEGfIHthvaRiAN0WxkLZbkeyAagzAo/AdKUAtseAReAWmAJakmazdJNbBUVEaLsFrAFnwAUwIemhSoB1YDeIHzgFriR9VAkwBKwAO8AAcAKcS/rshCiUAtvDwHZOLxgEloCgh3fgELiU9J1eVxQgbPoS24wSu2dgTtJbGQAxEQg2y8Ao8JrSwp80FIpA3sltjwAbwCbwAxwD15K+StFABMAWEIZQcH6U5P6f8/aM6LZZ3hDpBWE7CHQVuAklCIxLeqqyDEPeF4A7YDLphPOVAaQd2b4HZiqdBR0AzX2gvwgA9d4J82o+9n8REdb7Log9Wb92zdvwF1LEyiEj0wNQAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAChklEQVRYR+2XS6hNYRiGnzcDuRuQSyFSbjFEDN3LJSMTIUMDkbE6J7NTSAZmlJgpJdcMjIhInXRIUig6SsolE5dX3+5fp3XOXnuvtdRuD+x/smqvf//fs77vW9/7LtHlpS7HpwdQKwO2pwIrgXnATGACNLL4G/gIvAEGJX2tWtpKALanAJuAdcAqYH4OIGL9AYaBt8BT4D5wT9KXuGm7L66SGtf8KgWwvQzYC+wAlgJDwAvgA/ArHTYemAPE3tjzHLgNXJI0ZNsJoCleWwDba4CjwC7gNXATeJAD+JkDmJuCrwe2AwuAa8AA8KQ2gO14klPAFuAOcCGuZfW1PR3YChxIZbsO7KwFYHsScDYdEsH7JD2q2lip7muBE8CG1KjRA9VKYHsPcB54D+yT9LBq8Kzh0v4ox8bsv5UAbI8DbgCbo/6SzlQNnp680XBFqw7AIWA5cFzSp5oATa9aLgPVXkPbUatZkuLd7ugqnQMdjZ51Z6eDtDu/l4H/IwO2Q6iGJTXNiMIMjJlmo+WzQFLbNZntGWkkh4qekxTeYWS1Aqg1zUoAQk1PArdClP4FIMZyQ05jFZmKVgC2w8BcBGaHsEm6MnZvWQYiEwHQL2kEosrcsB1q2J8kOYTtsKQfdQHCgIS2R/ouJz/wuSTl05KHOJgELc44JulloUAV/ZhZKCAc0RFgd/J7cVj4grBk4f++pf9PTg4oLNlqYBuwCLgKnJb0uBV02xKEfNpeAuxPNisCvEoA7xJAlCkDCAVdnO6HHQtPWPjkIz3VIgOjXKztSGsYizAYK4CFQHjAickRRybClgfUYPKNdyV9L+uXWpMwgeQB4rsgLHke4JmkrDRl8XufZt3PwF9s6tsh/WvRgwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAACfUlEQVRYCe2WzWsTQRjGZ0OgHqwR6gf4edIggv1QvFtPvVXSv6igeCgtvXioZz0pgiI2rTf9Gzz0UqFWiNiDLX4d6vh7sjPpZpPNTO2iCA3Pb953Z573nek2ycaYw9c/vgPJfva31tbxN2AKTsEISFsMLXgFT5MkWSOWJzaegFWIVRPj2IFPQJMqLMIuSC2GJZiGq3DSofwO+UP4BJJq5kmqf3QQCo/DCkg/GO7BcKgZnmNwH1RDsLobtVBd1zpVQ/AWpHVr7bUuQ8QFNaOwbtPXG8JQRFlqwbwE0gbDuXR2/yO152ETpAdRHXDehF/wFcajigaY6HEDvoF6Xh9gTZcwvgZpNp0pHmUSxY50Bc9dkJrpTMGIow7SZ4aYNxw2awvadaYx1WALpEudBZIKZDXjLvRlsuPywsAXTluFBreA6QvpM5AaGjz5A0y6hZculhl8z9vZppXsBfkFkN5pCKH7KUI+t+57+j3cdCbQbAeko5npwlRGUWjILOAbBmk7M23yd8A/nIJvrGyTg+T5A3x0zc64WGY465ptutgO+QNstGeNueJimcH3/JBtmj/AslucdrHM4HvqN0P/vrxD/voXUc9JOMQqSLM9i7kJmURuuucSjx7lBOvvcI+nM4FrHHahzIfRd/qp52hno0EJ5gWQynwczw3as2uNnSvwAiQ9mG51GSIuKJwE1RLsc4ZKRNmehYIarICkn1dzJCN7jv4ZnhMwDz9BajLU+rsDsxRWYRH0/yPYbYZH0IDLcMShfIb8MchDsKpZIKkGtgkv02QC/KeDNCj91WPhzsYkMSbvYds6eQOm4CKcBqnF8N4Yo4/ZE57/a+SH+j/uwG9CesMLcRdgqQAAAABJRU5ErkJggg==\"","import PropTypes from 'prop-types';\r\nimport './StatusIndicator.css';\r\n\r\nconst status = [undefined, \"good\", \"attention\", \"bad\"];\r\nconst icons = [\"?\", \"✔\", \"●\", \"✖\"]\r\n\r\nconst StatusIndicator = ({temperature, humidity, co2}) => {\r\n\r\n  let score;\r\n\r\n  if (temperature === undefined || humidity === undefined || co2 === undefined) {\r\n    score = 0;\r\n  } else if ((temperature >= 18 && temperature <= 23) && (humidity >= 40 && humidity <= 60) && co2 <= 800) {\r\n    score = 1\r\n  } else if ((temperature >= 15 && temperature <= 26) && (humidity >= 20 && humidity <= 80) && co2 <= 1400) {\r\n    score = 2;\r\n  } else {\r\n    score = 3;\r\n  }\r\n\r\n  return (\r\n    <div id=\"status-indicator\" status={status[score]}>\r\n      {icons[score]}\r\n    </div>\r\n  );\r\n};\r\n\r\nStatusIndicator.propTypes = {\r\n  temperature: PropTypes.number,\r\n  humidity: PropTypes.number,\r\n  co2: PropTypes.number\r\n};\r\n\r\nexport default StatusIndicator;","import GridElement from \".\";\r\nimport StatusIndicator from \"../StatusIndicator\";\r\nimport PropTypes from 'prop-types';\r\n\r\nimport TemperatureIcon from '../../icons/temperture.png';\r\nimport HumidityIcon from '../../icons/humidity.png';\r\nimport CO2Icon from '../../icons/co2.png';\r\n\r\nconst InfoElement = ({location, room, position, temperature, humidity, co2}) => {\r\n  return (\r\n    <GridElement>\r\n      <div id=\"info-flex\">\r\n        <StatusIndicator temperature={temperature}  humidity={humidity}  co2={co2} />\r\n        <div style={{marginTop: \"15px\"}}>\r\n          <b>Raum {room}</b><br/>\r\n          #{position}<br/>\r\n          {location}<br/>\r\n        </div>\r\n        <div>\r\n          <div className=\"info-item\">\r\n            <img src={TemperatureIcon} alt=\"Temperatur\" />\r\n            {temperature || \"- \"}°C\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <img src={HumidityIcon} alt=\"Luftfeuchte\" />\r\n            {humidity || \"- \"}%\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <img src={CO2Icon} alt=\"CO2-Gehalt\" />\r\n            {co2 || \"-\"} ppm\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </GridElement>\r\n  );\r\n};\r\n\r\nInfoElement.propTypes = {\r\n  location: PropTypes.node,\r\n  room: PropTypes.node,\r\n  position: PropTypes.node,\r\n  temperature: PropTypes.number,\r\n  humidity: PropTypes.number,\r\n  co2: PropTypes.number\r\n};\r\n\r\nexport default InfoElement;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAACqElEQVRIS92WX0hUQRTGv3O97ppUECwV0UNvFtSjGCy2c3fdIjEqAiGQQPKh6CGIyIeChMgSon9SDxEFPQQSRFAES9CdWUQh1giSEsJe7c9SSRJ5986cGNBYwl11XUSa18t8v3O+OfPNJSzjomVkYWXCfN8/DWB1KSeIaFoIcamcUwvuTEr5CcCGMmI/hRBrqwlbY4xJzgo6jnMOQBuAVmb+6nlerpqw+uLqpZT3AHSGYbixpaXl83zDtlgb67XWoqamZoSILjLzJgubgVTdxlKw1wAmhRB/LZ6ry6p0tqw2EtEVZv5W7dFfEWdWvdGXUjYCyABwS0xjuxDi0ZJGn5lJStlERPcBbAHwVGt9eXb0jTF5Ijpjk8UY0+553mMi4pKRVq6aTCazvq6u7iYz72Xm80KIfqXUbgDPAfS7rns2CAKPiG4TkVtbWxuPx+PjFcGUUvYsrgF447pul9Z6BzPbsN0F4AMR9cVisYF8Pt/NzN0AeoQQvRXBfN8/4TiOFT9ujBkgIttRukjsrTHmcCQSCbXW75j5mRBif0UwpdRpZu7VWrclk8kXSqmJf5L/h+M4exzHeR+G4SSAQSGE7XrOVTZBstnsMWNMHxGdGhsbe9DQ0HAXwJEipSwzH7XvHBGNAHgihDhUEUxK6QG4ASBfKBQORqPRCDPbtGgFMOo4Tk9zc/OgUuoOgA5bVCKRuFURbGhoaFWhULDiXQCuM/MFAL89z9P2WgwPD0eDIOgAcJWIJoIgaEyn09bOxdtodyilthljrFiKiHwAD5n5I4AYgH0ADgD4rrXuTKVS2SU/nr7vbyeikwB2Atg88y8yDcAOzCgR9ScSiZdLSpDizblcrn5qaqoJwFYA65j5FxGNh2H4KpVKfSmXHLM6C37P5qt6Id//X9gf6JFsLNCgxeEAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAFFUlEQVRIS92Wb2hVdRjHv9/fOffueqcuY3/YxP7QHNUqe2HNrvPunlktLFpS3ZAgfOGcoBAF9s+MGZWRmGiggUaWmLG9CMJmm9N7z91SoUtYSpmmhkzd3CTd33Y75/fED1SyuasvRKLz5l44nPP5fZ/n+3yfQ9zAizeQhf8WLJ1OhwcHB2dorR8hWSoik0hmSJ7SWn8PoMV13RMNDQ36alUaU5mIqFQqNUNEGgA8BCAHgAWAJEVrLSQ9AOdJruvu7l4Vj8cz2YBXhLW0tOSGQqHnRGQFyTwAe0h+KSKuUuqciIREZKqIPEHyaRG5BcA+3/fnt7e3Hx9L5ShYY2NjsKCg4AWSK0meALA6Jydn++Dg4ASS+SKSo5QyJRvwPO+0bdvFJJcBqBWRn5VSddFo9KBR/2+Vo2Cu60ZFZCuA0yTfHB4ePhAOh6u01nMBPAjgZgB/ATgOYCfJ3zzP+9227UdFZCGAHbZtL62srDyVFbZnz55xmUxmO4ByAEuVUm1a6wUAFgP4A0CK5BkApozTAEw3/wF8JyLzSK4B8LA5pNb6M8dxTE8vXZcp27VrV7VlWc0AvgkGg3WZTKYWwDsADorIKgD7e3p6+oqLi3M9z6snudS8yfweOnRoS1lZWQXJbaa3WutXZ8+efXJMmOu6H4lInWVZdZ7n7SX5IYAyrXW94zjtJHUikbBFpEYp9QGACQCWhcPhnQMDA9NI/njhmXIRWew4Tkc2WIeI3E/yXhEpBbCZ5Bda63cdxzm3e/fuWqWUUVgMoJ/ka1rrr5VSxqkBEXkcwAKSrwNYEovFvsoGOyoihf39/UUTJ058TERMSV7s6enZGI/H/UQi0UlyMgDjxtUi8lYgEAh4nnfUmCYWi012XXeK1vptkq2xWGzbmLBkMvkrgJKhoaHJ48ePd7TWW0guz8/P31BeXp5xXdcofwDAWQNyHGdTKpUqEJH9IjJSVVVV2traOs627ZmBQKA3Go3+kE3ZtwBmAag0s+R53nwTR4WFhbsNLJFIGPc9T/K4iDQ6jtPV3NxcEA6HXwIgnuets207bowkInuzujGZTC43tjVNz83NXXvs2DE7Ho//aV6ULYZEhC0tLZNCoVAtyfe11qZXDeYwYypLpVJ3a63TANLBYHBeJBK5zLrZgK7r3i4iZkbvInkawCvd3d1N/8zLy+assbHRKiwsXA9gHoA1Q0ND782ZM2fkamlu7icSiY9JmhK6ZlwAnLQsa9GsWbOOXXx+VFx1dHSUeJ6XMDNEckV+fv6npl/ZgG1tbffZtm3WzU++7z9jWVa9iLwMYNHhw4e31tfXm3gbvTxN/ZPJ5EySnwO4CcBGEdkwMDBwZnh4eCQej2sRQVNTU6CgoEC5rpuJxWIbjXGUUkui0eim9vb2St/314nIeQBzzYxeEXahJLZSKgrgDRGZTtL0bofWeh+AXpP8tm2bFZOjtTah3QbgNsuypkaj0dPpdDqvv79/E8nZIyMjd9bU1Jg8HfuzwChMpVJmMz8rIlGl1FQAZsXkkvQvnHq7mTel1GYRiZB8qq+vryMvL69Ua72WZEkoFIpUVFSczQq72COThVrrWwOBwD1a6xIRmaiUMmneS/KXrq6uA0VFRU+KyCcATCiYPDSHNKG8PhgMroxEIsPXBLsWJ15YTSYAFpK8Q0R6ATT5vr++urr6xMVFet2+ro4cOZLT2dk5xbKssO/7xr1dsVjMfJ9cCoTrBruWCvx/YX8Djw+JO+1MwJwAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAEWElEQVRIS+2WXWgcVRTH/2dmN+NurEbbBCFisUrSbkBMydPW7czdXYnEQixURatG6YO0tlDEj4K0hPhQIhW1fmBMU6HoSwxFBBOTGCczSWqJayW0Vat902rJ2iQ0m3V3s3OP3JKVfDUJVfogztPAvff/O/9zzzkzhOv40HVk4X/Yv5LtFaWxvb1dX7Nmzb2apm0EsIqZcz6f77yu68PhcHhspZEsC0skEsFUKtVARNuZOQSgmJmniehXAK6U8nUhxE9ExMtBl4QpR2VlZc8C2AdcKabDzHxa13UFfIyZBTO7hmHsWInDJWGu626UUr4FYK2UcmsmkzkzPDw8HQqFqLy8fHUul2tSjgG8YlnW4X/kzLbtHUTUDKA5nU4frqury84WnAnmIwB3AxjSNO1QMBjsqampmV4MfFVnLS0t/srKSpW+A5qmbYlEIj1EBNu2DSFERonZtn0DEbUAuAdAKQADQFNpaWlLVVVVbj5wUdiMiCCiF5nZAvDo6Ojo8fHxca2ioiImhPiiIKT2zrw/QEQHAaSZ+TkhxMllYY2NjZoQ4j4AbzPzjUQ0IKV8P5lMfrNu3TpjcnKyDcAzBXezoD4i2snMB4noE2ZuMwzj23A4/GdhzwJnnZ2dRiAQOEJEESnla4ZhdITD4T+ISA4ODq7K5/PfAXjSsqyvlYjjOHdKKX8RQniu64allIMAUgB+BvAhM7cWAlsA6+7uLjYM4xwznykqKnpq06ZNo4XIFMzzvIvM/K5pmvu6urpWB4PBnel0+s26urrLaj2bzVb7/f6QlHIXM5dJKR+PxWJfKY0FMNu2VeouEJGdyWS219bWTs2G5fP5y0Q0JKXcDaCeiO5Kp9O7FaywL5FI+KemprYy8yEA5yzLun8B7OzZs0XJZLIeQCuA34hor2maPQMDA1sCgcBAJpORCgbgEjOfJKIKIvrM7/fvn303SnhkZKR4bGysj4hClmXdNAd24sSJQC6XawTwPICLSpCIWouLiz9IpVL7AdzmeV6zruvn51XZLk3TOrLZbMDn8+WEEOqsaovbVSBEtNo0zbVzYK7r1kspjxHRD0T0KoBTkUhklIg8x3EeYeYjAFTJPzwbRkTvMbNq9g1E1GGaZhsza47jqDQfAPC5ZVkNc2D9/f1HVZUR0YMqdbMFbdter+4JwK1LjKQfPc+Lx2KxC8ysu667j5lfIqJjpmnumQ/rAlCbz+dL4/H4paGhoTLP85SjamYOAngIQKGBFzA1TduzefPmdwoLjuNsYOZ2ZvYLIdbPh6miaJBSPhGNRtvVZFDfL2Z+WQUxM4qWmrWnieiU53lvRKPRkZk26WXmCsuyrmTk79J3HCfKzMeJ6EvTNLepRZX7vr6+W3Rd30tELyzhjJn5qM/nawoEAr+rQdzb23uH3+//mJkhhIgsKH3btp8uKSn5tLq6emIpCytdSyQSN09MTJTH4/HvF23qlQpdy75lfwuuRfRqZ/67sL8ANUz/LBJ4NysAAAAASUVORK5CYII=\"","import PropTypes from 'prop-types';\r\nimport './Dialog.css';\r\n\r\nconst Dialog = ({title, actionText, onActionClick, onAbortClick, children}) => {\r\n  return (\r\n    <div className=\"dialog-wrapper\">\r\n      <dialog open>\r\n        <h2>{title}</h2>\r\n\r\n        {children}\r\n\r\n        <div className=\"dialog-buttons\">\r\n          <input \r\n            type=\"button\"\r\n            value=\"Schließen\"\r\n            onClick={onAbortClick} />\r\n\r\n          <input \r\n            type=\"button\"\r\n            value={actionText}\r\n            onClick={onActionClick} />\r\n\r\n        </div>\r\n      </dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nDialog.propTypes = {\r\n  title: PropTypes.node.isRequired,\r\n  actionText: PropTypes.node.isRequired,\r\n  onActionClick: PropTypes.func.isRequired,\r\n  onAbortClick: PropTypes.func.isRequired,\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Dialog;","export const SERVER = \"10.20.83.186\";","import { useState, useEffect } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {SERVER} from '../../config';\r\nimport Dialog from \".\";\r\n\r\nconst FilterDialog = ({onFilter, onHide}) => {\r\n\r\n  const [date, setDate] = useState(new Date().toISOString().slice(0, 10));\r\n  const [location, setLocation] = useState(0);\r\n  const [room, setRoom] = useState(0);\r\n  const [position, setPosition] = useState(0);\r\n\r\n  const [locationList, setLocations] = useState([]);\r\n  const [roomList, setRooms] = useState([]);\r\n  const [positionList, setPositions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://\" + SERVER + \"/SelectData.php?locations\")\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        setLocation(json[0].id);\r\n        setLocations(json);\r\n      })\r\n      .then(() => setRooms([]))\r\n      .then(() => setRoom(0))\r\n      .then(() => setPositions([]))\r\n      .then(() => setPosition(0));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://\" + SERVER + \"/SelectData.php?location_id=\" + location)\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        setRooms(json);\r\n        setRoom(json[0]);\r\n      })\r\n      .then(() => setPositions([]))\r\n      .then(() => setPosition(0));\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://\" + SERVER + \"/SelectData.php?room_id=\" + room)\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        setPositions(json);\r\n        setPosition(json[0]);\r\n      });\r\n  }, [room]);\r\n\r\n  return (\r\n    <div id=\"filter-dialog\">\r\n      <Dialog\r\n        title=\"Daten filtern\"\r\n        actionText=\"Daten abrufen\"\r\n        onActionClick={() => onFilter({\r\n          date: date,\r\n          location: (locationList.filter(i => i.id === location)[0] || {}).name || \"\",\r\n          room: room,\r\n          position: position\r\n        })}\r\n        onAbortClick={onHide}>\r\n\r\n        {/* Datum */}\r\n\r\n        <label htmlFor=\"date\">Datum: </label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"date\"\r\n          max={new Date().toISOString().slice(0, 10)}\r\n          value={date}\r\n          onChange={e => setDate(e.target.value)} /><br/>\r\n\r\n        {/* Standort */}\r\n\r\n        <label htmlFor=\"location\">Standort: </label>\r\n        <select id=\"location\"\r\n          value={location}\r\n          onChange={e => setLocation(parseInt(e.target.value))}>\r\n\r\n          {locationList.map((item) => \r\n            <option \r\n              key={item.id} \r\n              value={item.id}>\r\n                {item.name}\r\n            </option>\r\n          )}\r\n        </select><br/>\r\n        \r\n        {/* Raum */}\r\n\r\n        <label htmlFor=\"room\">Raum: </label>\r\n        <select id=\"room\"\r\n          value={room}\r\n          onChange={e => setRoom(parseInt(e.target.value))}>\r\n\r\n          {roomList.map((item) => \r\n            <option \r\n              key={item} \r\n              value={parseInt(item)}>\r\n                Raum {item}\r\n            </option>\r\n          )}\r\n        </select>\r\n        \r\n        {/* Position */}\r\n\r\n        <label htmlFor=\"position\">Position: </label>\r\n        <select id=\"position\"\r\n          value={position}\r\n          onChange={e => setPosition(parseInt(e.target.value))}>\r\n\r\n          {positionList.map((item) => \r\n            <option \r\n              key={item} \r\n              value={parseInt(item)}>\r\n                #{item}\r\n            </option>\r\n          )}\r\n        </select>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nFilterDialog.propTypes = {\r\n  onHide: PropTypes.func.isRequired\r\n};\r\n\r\nexport default FilterDialog;","import Dialog from '.';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst InfoDialog = ({onHide}) => {\r\n  return (\r\n    <Dialog\r\n      title=\"Informationen\"\r\n      actionText=\"Auf GitHub ansehen\"\r\n      onActionClick={() => window.open(\"https://github.com/janbellenberg/mobiler-luftqualitaetsmesser\", '_blank').focus()}\r\n      onAbortClick={onHide}>\r\n\r\n      <img src=\"https://hnbk.de/wp-content/uploads/2017/04/HNBKSmall-e1492069901821.png\"\r\n        style={{\r\n          display: \"block\",\r\n          margin: \"0 auto 2em auto\"\r\n        }}\r\n        alt=\"HNBK\" />\r\n      Zur Überwachung der <b>Luftqualität</b> in den Klassenräumen soll eine autonome, mobile Messstation realisiert werden, \r\n      die in jedem Klassenraum an unterschiedlichen Positionen die \r\n      <b> CO2-Belastung in ppm, die Temperatur in °C und die Luftfeuchte in % misst \r\n      und diese in einer Datenbank speichert</b><p/>\r\n\r\n      <hr/>\r\n\r\n      Die Erfassung des Raumklimas erfolgt in den vorhandenen Klassenräumen. Die Darstellung soll auf einer Website erfolgen. \r\n      Das Projekt ist ein Feldversuch und hat keinen professionellen Charakter. Benutzer sollen Lehrer und Schüler des HNBKs sein. \r\n      Realisiert wird dieses Projekt durch Schülerinnen und Schüler des Beruflichen Gymnasiums im Rahmen der Berufsausbildung zum ITA (Informationstechnischer Assistentin)\r\n\r\n      <hr/>\r\n\r\n      Copyright © 2021 <a href=\"https://www.hnbk.de\" rel=\"nofollow\">Heinz-Nixdorf Berufskolleg</a><br/>\r\n      Lehrer: <a href=\"https://github.com/alfredlehmann\">Alfred Lehmann</a> &amp; Jörg Dixkens<br/>\r\n      Schüler:\r\n      <a href=\"https://github.com/janbellenberg\">@janbellenberg</a>, <a href=\"https://github.com/OmarAk312\">@OmarAk312</a>, <a href=\"https://github.com/NeroCyer\">@NeroCyer</a>, <a href=\"https://github.com/sara-shalouf\">@sara-shalouf</a>\r\n      <p/>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nInfoDialog.propTypes = {\r\n  onHide: PropTypes.func.isRequired\r\n};\r\n\r\nexport default InfoDialog;","import { useState } from \"react\";\r\nimport Header from \"./components/Header/\";\r\nimport DiagramElement from \"./components/GridElement/DiagramElement\";\r\nimport ActionElement from \"./components/GridElement/ActionElement\";\r\nimport InfoElement from \"./components/GridElement/InfoElement\";\r\nimport DiagDialog from \"./components/Dialog/DiagDialog\";\r\nimport FilterDialog from \"./components/Dialog/FilterDialog\";\r\nimport InfoDialog from \"./components/Dialog/InfoDialog\";\r\nimport {SERVER} from './config';\r\n\r\nconst App = () => {\r\n  \r\n  const [temperature, setTemperature] = useState([]);\r\n  const [humidity, setHumidity] = useState([]);\r\n  const [co2, setCo2] = useState([]);\r\n  const [labels, setLabels] = useState([]);\r\n\r\n  const [selectedLocation, setSelectedLocation] = useState();\r\n  const [selectedRoom, setSelectedRoom] = useState();\r\n  const [selectedPosition, setSelectedPosition] = useState();\r\n  const [lastFilter, setLastFilter] = useState();\r\n\r\n  const [showDiagDialog, setShowDiagDialog] = useState(false);\r\n  const [showFilterDialog, setShowFilterDialog] = useState(true);\r\n  const [showInfoDialog, setShowInfoDialog] = useState(false);\r\n\r\n  const updateData = async (date, position) => {\r\n    let tmp = await fetch(\"http://\" + SERVER + \"/SelectData.php?date=\" + date + \"&position=\" + position);\r\n    tmp = await tmp.json();\r\n    let t = [];\r\n    let h = [];\r\n    let c = [];\r\n    let l = [];\r\n\r\n    tmp.forEach((item) => {\r\n      t.push(item.temperature);\r\n      h.push(item.humidity);\r\n      c.push(item.co2);\r\n      l.push(item.timestamp);\r\n    });\r\n\r\n    setTemperature(t);\r\n    setHumidity(h);\r\n    setCo2(c);\r\n    setLabels(l);\r\n  };\r\n\r\n  const exportCSV = () => {\r\n    let result = \"data:text/csv;charset=utf-8,\";\r\n    result += 'Zeit;Temperatur;Luftfeuchte;CO2-Gehalt\\r\\n';\r\n\r\n    for(let i = 0; i < labels.length; i++) {\r\n      result += labels[i];\r\n      result += ';';\r\n      result += temperature[i];\r\n      result += ';';\r\n      result += humidity[i];\r\n      result += ';';\r\n      result += co2[i];\r\n      result += '\\r\\n';\r\n    }\r\n\r\n    encodeURI(result);\r\n\r\n    var link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", encodeURI(result));\r\n    link.setAttribute(\"download\", \"export.\" + lastFilter.date + \".csv\");\r\n    document.body.appendChild(link);\r\n\r\n    link.click();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header\r\n        onLoadData={() => setShowFilterDialog(true)}\r\n        onDiag={() => setShowDiagDialog(true)} />\r\n      <br/>\r\n\r\n      <main>\r\n        <div>\r\n          <InfoElement\r\n            location={selectedLocation || \"Standort nicht ausgewählt\"}\r\n            room={selectedRoom || \"nicht ausgewählt\"}\r\n            position={selectedPosition || \" -\"}\r\n            temperature={temperature[temperature.length - 1]}\r\n            humidity={humidity[humidity.length - 1]}\r\n            co2={co2[co2.length - 1]} />\r\n          \r\n          <ActionElement onExport={() => {\r\n            if(lastFilter !== undefined) {\r\n              exportCSV();\r\n            }\r\n          }} onInfo={() => setShowInfoDialog(true)}  onRefresh={() => {\r\n            if(lastFilter === undefined) {\r\n              setShowFilterDialog(true);\r\n            } else {\r\n              updateData(lastFilter.date, lastFilter.position);\r\n            }\r\n          }} />\r\n        </div>\r\n\r\n        <DiagramElement \r\n          title=\"Temperatur in °C\"\r\n          data={temperature}\r\n          labels={labels}\r\n          min={-10}\r\n          max={40} />\r\n\r\n        <DiagramElement \r\n          title=\"Luftfeuchte in %\"\r\n          data={humidity}\r\n          labels={labels}\r\n          min={0}\r\n          max={100} />\r\n\r\n        <DiagramElement \r\n          title=\"CO&#8322; in ppm\"\r\n          data={co2}\r\n          labels={labels}\r\n          min={0}\r\n          max={5000} />\r\n      </main>\r\n\r\n      { showDiagDialog\r\n        ? <DiagDialog onHide={() => setShowDiagDialog(false)} />\r\n        : null\r\n      }\r\n\r\n      { showFilterDialog\r\n        ? <FilterDialog\r\n            onFilter={(data) => {\r\n              setSelectedLocation(data.location);\r\n              setSelectedRoom(data.room);\r\n              setSelectedPosition(data.position);\r\n              updateData(data.date, data.position);\r\n              setShowFilterDialog(false);\r\n              setLastFilter({date: data.date, position: data.position});\r\n            }}\r\n            onHide={() => setShowFilterDialog(false)} />\r\n        : null\r\n      }\r\n\r\n      { showInfoDialog\r\n        ? <InfoDialog onHide={() => setShowInfoDialog(false)} />\r\n        : null\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport './style/style.css';\r\nimport './style/colors.css';\r\nimport './style/fonts.css';\r\nimport './style/scrollbars.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}